<!DOCTYPE html>
<html>
    <head>
        <title>Example</title>
		<meta http-equiv="cache-control" content="max-age=0" />
		<meta http-equiv="cache-control" content="no-cache" />
		<meta http-equiv="expires" content="0" />
		<meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
		<meta http-equiv="pragma" content="no-cache" />
    </head>
    <body>
        <div id="chart"></div>
    </body>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/lodash@4.17.15/lodash.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    <script>
    	axios.get('https://script.google.com/macros/s/AKfycbzY6nIPK6-ydARD3JEWIuYOvuz1sBso_xNhx4J-SD-q2ydu4HqC/exec')
		  .then(function (response) {
		    // handle success
		    console.log(response.data);
		    var lista = ['pergunta1','pergunta2'];
		    var total = response.data;
		    var diretoria = _.filter(total, function(o) { return _.includes(['Felipe'],o.nome); });
		    var conselho = _.reject(total, function(o) { return _.includes(['Felipe'],o.nome); })
		    var series = [{
                name: 'Total',
                data: _.map(lista, function(o){ return _.meanBy(total, o);})
            }, {
                name: 'Diretoria',
                data: _.map(lista, function(o){ return _.meanBy(diretoria, o);})
            }, {
                name: 'Conselho',
                data: _.map(lista, function(o){ return _.meanBy(conselho, o);})
            }];
            console.log(series);
            var options = {
	            chart: {
	                height: 350,
	                type: 'bar',
	            },
	            plotOptions: {
	                bar: {
	                    horizontal: false,
	                    columnWidth: '55%',
	                    endingShape: 'rounded'	
	                },
	            },
	            dataLabels: {
	                enabled: false
	            },
	            stroke: {
	                show: true,
	                width: 2,
	                colors: ['transparent']
	            },
	            series: series,
	            xaxis: {
	                categories: lista,
	            },
	            yaxis: {
	                labels: {
					    formatter: function (value) {
					    	return val.toFixed(2);
					    }
					},
	            },
	            fill: {
	                opacity: 1

	            },
	            tooltip: {
	                y: {
	                    formatter: function (val) {
	                        return val.toFixed(2);
	                    }
	                }
	            }
	        }

	        var chart = new ApexCharts(
	            document.querySelector("#chart"),
	            options
	        );

	        chart.render();

		  })
		  .catch(function (error) {
		    // handle error
		    console.log(error);
		  })
		  .finally(function () {
		    // always executed
		  });

		
    </script>
</html>